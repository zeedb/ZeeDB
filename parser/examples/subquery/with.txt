with foo as (select customer_id from customer) select customer_id 
from foo

LogicalWith foo
	LogicalMap customer.customer_id
		Filter* (LessOrEqual $xmin (Xid)) (Less (Xid) $xmax)
			Map* customer.customer_id $xmin $xmax
				LogicalGet customer
	LogicalMap foo.customer_id
		LogicalGetWith foo