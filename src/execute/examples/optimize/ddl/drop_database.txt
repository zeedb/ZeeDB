drop database foo

Script
	Assign catalog_id 0
		TableFreeScan
	Assign catalog_id catalog.catalog_id
		NestedLoop Single
			Filter* (LessOrEqual $xmin (Xid)) (Less (Xid) $xmax) (Equal catalog.catalog_name "foo") (Equal catalog.parent_catalog_id @catalog_id)
				Map* catalog.parent_catalog_id catalog.catalog_id catalog.catalog_name $xmin $xmax
					SeqScan catalog
			TableFreeScan
	Call drop_table table.table_id
		NestedLoop Single
			Filter* (LessOrEqual $xmin (Xid)) (Less (Xid) $xmax) (Equal table.catalog_id @catalog_id)
				Map* table.catalog_id table.table_id $xmin $xmax
					SeqScan table
			TableFreeScan
	Delete column
		Map $in:true $tid $xmax $xmin column.table_id
			HashJoin Semi (Equal column.table_id table.table_id)
				Partition* table.table_id
					Filter* (LessOrEqual $xmin (Xid)) (Less (Xid) $xmax) (Equal table.catalog_id @catalog_id)
						Map* table.catalog_id table.table_id $xmin $xmax
							SeqScan table
				Partition* column.table_id
					Filter* (LessOrEqual $xmin (Xid)) (Less (Xid) $xmax)
						Map* column.table_id $xmin $xmax $tid
							SeqScan column
	Delete table
		Filter* (LessOrEqual $xmin (Xid)) (Less (Xid) $xmax) (Equal table.catalog_id @catalog_id)
			Map* table.catalog_id $xmin $xmax $tid
				SeqScan table
	Delete catalog
		Filter* (LessOrEqual $xmin (Xid)) (Less (Xid) $xmax) (Equal catalog.catalog_id @catalog_id)
			Map* catalog.catalog_id $xmin $xmax $tid
				SeqScan catalog