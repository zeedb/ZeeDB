select store_id, (select count(1) from customer where customer.store_id = store.store_id) as customers
from store

Map $query.customers:$aggregate.$agg1 store.store_id
	HashJoin Single (Equal store.store_id store.store_id')
		Partition* store.store_id'
			Aggregate store.store_id' $aggregate.$agg1:(Count $proj.$count)
				Map $proj.$count:1 store.store_id'
					Map store.store_id':customer.store_id, ..
						Filter* (LessOrEqual customer.$xmin (Xid)) (Less (Xid) customer.$xmax)
							Map* customer.store_id customer.$xmin customer.$xmax
								SeqScan customer
		Partition* store.store_id
			Filter* (LessOrEqual store.$xmin (Xid)) (Less (Xid) store.$xmax)
				Map* store.store_id store.$xmin store.$xmax
					SeqScan store